# 🚀 RENDER DEPLOYMENT GUIDE - Eventloo

## 📋 Prerequisites

### **Required Accounts:**
- [Render](https://render.com) - Backend & Database
- [Vercel](https://vercel.com) - Frontend
- [GitHub](https://github.com) - Code Repository

### **Required Tools:**
- Git (for version control)
- Render CLI (optional)

## 🎯 Deployment Strategy

### **Backend (Render):**
- **Service:** Django REST API
- **Database:** PostgreSQL (Render)
- **URL:** https://eventloo-backend.onrender.com

### **Frontend (Vercel):**
- **Service:** React SPA
- **URL:** https://eventloo.vercel.app

## 🔧 Backend Deployment (Render)

### **Step 1: Prepare Backend**
```bash
# Ensure all files are committed
git add .
git commit -m "Prepare for Render deployment"
git push origin main
```

### **Step 2: Deploy to Render**
1. **Go to Render Dashboard:** https://dashboard.render.com
2. **Click "New"** → **"Blueprint"**
3. **Connect GitHub Repository:** Select your eventloo repository
4. **Render will auto-detect:** `render.yaml` configuration
5. **Click "Apply"** to deploy

### **Step 3: Manual Deployment (Alternative)**
If Blueprint doesn't work:

1. **Go to Render Dashboard:** https://dashboard.render.com
2. **Click "New"** → **"Web Service"**
3. **Connect GitHub Repository:** Select your eventloo repository
4. **Configure Service:**
   - **Name:** `eventloo-backend`
   - **Root Directory:** `backend`
   - **Environment:** `Python 3`
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `cd backend && python manage.py migrate && python manage.py create_admin_user && gunicorn event_management.wsgi:application --bind 0.0.0.0:$PORT --workers 2 --threads 4 --timeout 120`

### **Step 4: Create Database**
1. **Go to Render Dashboard:** https://dashboard.render.com
2. **Click "New"** → **"PostgreSQL"**
3. **Configure Database:**
   - **Name:** `eventloo-db`
   - **Database:** `eventloo_db`
   - **User:** `eventloo_user`
   - **Plan:** Free
4. **Copy the Internal Database URL**

### **Step 5: Connect Database to Backend**
1. **Go to your backend service**
2. **Environment Variables:**
   ```
   DATABASE_URL=postgresql://... (from Render database)
   DEBUG=False
   SECRET_KEY=your-secure-secret-key-here
   ALLOWED_HOSTS=eventloo-backend.onrender.com,localhost,127.0.0.1
   CORS_ALLOWED_ORIGINS=https://eventloo.vercel.app,http://localhost:3000
   CSRF_TRUSTED_ORIGINS=https://eventloo.vercel.app,http://localhost:3000
   ```

## 🎨 Frontend Deployment (Vercel)

### **Step 1: Prepare Frontend**
```bash
# Ensure production config is correct
cd frontend
npm run build
```

### **Step 2: Deploy to Vercel**
1. **Go to Vercel Dashboard:** https://vercel.com/dashboard
2. **Import Project:** "Import Git Repository"
3. **Select Repository:** Your eventloo repository
4. **Set Root Directory:** `frontend`
5. **Add Environment Variables:**

```env
REACT_APP_API_URL=https://eventloo-backend.onrender.com/api
REACT_APP_FRONTEND_URL=https://eventloo.vercel.app
```

### **Step 3: Configure Build Settings**
- **Framework Preset:** Create React App
- **Build Command:** `npm run build`
- **Output Directory:** `build`
- **Install Command:** `npm install`

## 🔐 Environment Variables

### **Render (Backend):**
```env
DEBUG=False
SECRET_KEY=your-secure-secret-key-here
DATABASE_URL=postgresql://... (auto-generated by Render)
ALLOWED_HOSTS=eventloo-backend.onrender.com,localhost,127.0.0.1
CORS_ALLOWED_ORIGINS=https://eventloo.vercel.app,http://localhost:3000
CSRF_TRUSTED_ORIGINS=https://eventloo.vercel.app,http://localhost:3000
```

### **Vercel (Frontend):**
```env
REACT_APP_API_URL=https://eventloo-backend.onrender.com/api
REACT_APP_FRONTEND_URL=https://eventloo.vercel.app
```

## 🧪 Testing Deployment

### **1. Test Backend Health:**
```bash
curl https://eventloo-backend.onrender.com/
# Expected: {"status": "healthy", "service": "eventloo-backend"}
```

### **2. Test API Endpoints:**
```bash
# Test login endpoint
curl -X POST https://eventloo-backend.onrender.com/api/token/ \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@eventloo.com","password":"admin123"}'
```

### **3. Test Frontend:**
- **Open:** https://eventloo.vercel.app
- **Login:** admin@eventloo.com / admin123
- **Test all features:** Events, Users, Teams, etc.

## 🔄 Continuous Deployment

### **Automatic Deployments:**
- **Render:** Automatically deploys on git push to main
- **Vercel:** Automatically deploys on git push to main

### **Manual Deployments:**
```bash
# Render (if using CLI)
render login
render deploy

# Vercel (if using CLI)
vercel login
vercel --prod
```

## 🛠️ Troubleshooting

### **Common Issues:**

#### **1. Backend Connection Errors:**
- Check Render logs for startup errors
- Verify environment variables are set
- Ensure DATABASE_URL is correct

#### **2. Frontend API Errors:**
- Verify REACT_APP_API_URL is correct
- Check CORS settings in backend
- Test API endpoints directly

#### **3. Database Issues:**
- Check Render PostgreSQL logs
- Verify migrations ran successfully
- Test database connection

### **Debug Commands:**
```bash
# Check Render logs
# Available in Render dashboard

# Check Vercel logs
vercel logs

# Test API endpoints
curl -v https://eventloo-backend.onrender.com/api/admin/dashboard/summary/
```

## 📊 Monitoring

### **Render Monitoring:**
- **Logs:** Available in Render dashboard
- **Metrics:** CPU, Memory, Network usage
- **Health Checks:** Automatic health monitoring

### **Vercel Monitoring:**
- **Analytics:** Page views, performance
- **Functions:** Serverless function logs
- **Deployments:** Build and deployment status

## 🔒 Security Checklist

### **Backend Security:**
- ✅ DEBUG=False in production
- ✅ SECRET_KEY is secure and unique
- ✅ CORS properly configured
- ✅ CSRF protection enabled
- ✅ Database credentials secure

### **Frontend Security:**
- ✅ HTTPS enforced
- ✅ Environment variables secure
- ✅ No sensitive data in client code
- ✅ Proper error handling

## 🎉 Success Indicators

### **Backend:**
- ✅ Health check returns 200
- ✅ Database migrations successful
- ✅ Admin user created
- ✅ API endpoints responding

### **Frontend:**
- ✅ Build successful
- ✅ Deployed to Vercel
- ✅ Can login successfully
- ✅ All features working

---

## 🚀 Quick Deploy Commands

```bash
# 1. Commit all changes
git add .
git commit -m "Ready for Render deployment"
git push origin main

# 2. Deploy Backend (Render)
# - Go to Render dashboard
# - Use Blueprint or manual deployment
# - Set environment variables
# - Deploy

# 3. Deploy Frontend (Vercel)
# - Go to Vercel dashboard
# - Import GitHub repo
# - Set environment variables
# - Deploy

# 4. Test deployment
curl https://eventloo-backend.onrender.com/
open https://eventloo.vercel.app
```

**🎯 Your Eventloo application is now ready for Render deployment!** 